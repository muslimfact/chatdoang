


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat App</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
     
    <style>
    .chat-input-fixed {
   
    width: 100%;
    background-color: #f7cbe0;
    padding: 10px;
    z-index: 999;
    border-top: 2px solid #ccc;
}

/* biar chat terakhir ga ketutup input */
.chat-container {
    flex: 1;                 /* NGAMBIL SISA TINGGI */
    overflow-y: auto;
    padding: 10px;
    border: 1px solid #ccc;
}

.chat-input {
    width: 100%;
    background-color: #f7cbe0;
    padding: 10px;
    border-top: 2px solid #ccc;
}


        .message {
            margin: 10px 0;
            padding: 5px;
            background-color: #f2f2f2;
            border-radius: 5px;
        }
        
        .urlhref{
            color: white;
        }
        
        .urlhrefbody{
    color: blue;
    text-decoration: underline;
    word-break: break-all;
}

    </style>
</head>
<body>
    
    <div class=" mt-1">
        <div >
        <div 
        id="contentwebid"
        style="background-color: green;
        color: white;
        padding: 4px;
        box-shadow: rgba(0,0,0.5)
        " class="z-depth-5 card">
            <p style="font-weight: bold">Yg Web Error ga bisa Nonton . Pindah Ke Web Cadangan ini</p>
            <ul>
                 <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://yonakeren.vercel.app">
                      https://yonakeren.vercel.app
                    </a>
                </li>
                
                 <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://samsulkaya.vercel.app">
                      https://samsulkaya.vercel.app
                    </a>
                </li>
                  <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://tantemeli.vercel.app">
                     https://tantemeli.vercel.app/
                    </a>
                </li>
                  <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://diontolol.vercel.app">
                     https://diontolol.vercel.app/
                    </a>
                </li>
                  <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://nakal99.vercel.app">
                     https://nakal99.vercel.app/
                    </a>
                </li>
            
                <li>
                <a 
                    class="urlhref"
                    target="_blank"
                    href="https://papadion.vercel.app"
                    >https://papadion.vercel.app</a>
                </li>
                <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://bosindo.vercel.app">
                      https://bosindo.vercel.app
                    </a>
                </li>
                 <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://opangtampan.vercel.app">
                      https://opangtampan.vercel.app
                    </a>
                </li>
                <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://yogikeren.vercel.app">
                      https://yogikeren.vercel.app
                    </a>
                </li>
                   <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://lulucantik.vercel.app">
                      https://lulucantik.vercel.app
                    </a>
                </li>
                <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://sukaaja.vercel.app">
                      https://sukaaja.vercel.app
                    </a>
                </li>
                <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://togefilm.vercel.app">
                      https://togefilm.vercel.app
                    </a>
                </li>
               
                <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://play21.vercel.app">
                      https://play21.vercel.app
                    </a>
                </li>
                <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://markipul.vercel.app">
                      https://markipul.vercel.app
                    </a>
                </li>
                  <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://depong.vercel.app">
                      https://depong.vercel.app
                    </a>
                </li>
                  
                
                <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://megurijepang.vercel.app">
                      https://megurijepang.vercel.app
                    </a>
                </li>
                 <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://iq7.vercel.app">
                      https://iq7.vercel.app
                    </a>
                </li>
                <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://orangkaya.vercel.app">
                      https://orangkaya.vercel.app
                    </a>
                </li>
                <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://mangboncu.vercel.app">
                      https://mangboncu.vercel.app
                    </a>
                </li>
                <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://bosjepang.vercel.app">
                      https://bosjepang.vercel.app
                    </a>
                </li>
                      
                 <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://oyosuka.vercel.app">
                       https://oyosuka.vercel.app
                    </a>
                </li>
                
                
             
                 <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://doodstreamx.vercel.app/">
                     https://doodstreamx.vercel.app
                    </a>
                </li>
                
                <li>
                    <a 
                        class="urlhref"
                        target="_blank"
                        href="https://javmom.vercel.app">
                        https://javmom.vercel.app
                    </a>
                </li>
                 <li>
                    <a
                    class="urlhref"
                    target="_blank"
                     href="https://cekidod.vercel.app/">
                    https://cekidod.vercel.app/
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <div>
        
        <h5 style="font-weight: bold">Chat Admin</h5>
        <div
         class="chat-container shadow" id="chatContainer">
        </div>
        
        <div class="chat-input-fixed">
          
    <div class="row no-gutters">
        <div class="col-9 pr-1">
            <input
                type="text"
                class="form-control"
                id="messageInput"
                placeholder="Ketik Obrolan Bokep disini"
                style="border: 3px solid black;"
            >
        </div>
        <div class="col-3 pl-1">
            <button class="btn btn-primary btn-block h-100" onclick="sendMessage()">
                Kirim
            </button>
        </div>
    </div>
</div>

    </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        async function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value;
        
            if (message.trim() === '') return;
        
            const sendButton = document.querySelector('.btn-primary');
            sendButton.innerText = 'Sedang Mengirim...';
            sendButton.disabled = true;
      
         const urlRegex = /(https?:\/\/[^\s]+|[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/g;
      
        const containsUrl = urlRegex.test(message);

        if (containsUrl) {
            const password = prompt("Hanya ADMIN yg BIsa kirim Pesan Dengan LINK !!! Masukin Password Jika Lu ADMIN NYA");
            if (password !== "sysfoo") {
                alert("Password salah! Pesan tidak terkirim.");
                sendButton.innerText = 'Kirim';
                sendButton.disabled = false;
                return;
            }
        }

            try {
                const domain = document.referrer; 
        
                const data = {
                    "domain": domain,
                    "comment": message,
                };
        
                const response = await fetch('https://poophdpocket.pockethost.io/api/collections/chat_jepang/records', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
        
                if (response.ok) {
                    const chatContainer = document.getElementById('chatContainer');
        
                    const createdDate = new Date(); // Gunakan tanggal saat ini
                    const options = { day: 'numeric', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit' };
                    const formattedDate = createdDate.toLocaleDateString('id-ID', options);
        
                    const timeSpan = document.createElement('span');
                    timeSpan.innerText = formattedDate;
                    timeSpan.style.fontSize = '13px';
                    timeSpan.style.color = 'green';
                    timeSpan.style.fontWeight = 'bold';
        
                    const messageDiv = document.createElement('div');
                    const br = document.createElement('br');
                    messageDiv.classList.add('message');
                    messageDiv.innerText = message;
                    messageDiv.style.fontWeight = "bold";
                    chatContainer.appendChild(messageDiv);
        
                    messageDiv.appendChild(br);
                    messageDiv.appendChild(timeSpan);
                    
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                    messageInput.value = '';
                    const snackbar = document.createElement('div');
                    snackbar.classList.add('alert', 'alert-success', 'mt-3');
                    snackbar.innerText = 'Pesan Terkirim';
                    document.body.appendChild(snackbar);
        
                    setTimeout(() => {
                        snackbar.remove();
                    }, 3000);
                } else {
                    throw new Error('Error in sending message');
                }
            } catch (error) {
                console.error(error);
                $('#errorModal').modal('show');

              // auto close 2 detik
              setTimeout(() => {
                  $('#errorModal').modal('hide');
              }, 2000);

            } finally {
                sendButton.innerText = 'Kirim';
                sendButton.disabled = false;
            }
        }
        
async function loadChatMessages() {
    const chatContainer = document.getElementById('chatContainer');

    const loadingDiv = document.createElement('div');
    loadingDiv.classList.add('message');
    loadingDiv.innerHTML = `
    <span style="font-weight:bold;font-size:16px">
        Sedang Memuat Chat Bokep Sabar Bang....
    </span>
`;

    chatContainer.appendChild(loadingDiv);

    const thirtyDaysAgo = new Date();
    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 10);

    const formattedDate = `${thirtyDaysAgo.getFullYear()}-${String(thirtyDaysAgo.getMonth() + 1).padStart(2, '0')}-${String(thirtyDaysAgo.getDate()).padStart(2, '0')}`;

    try {
        const response = await fetch(`https://poophdpocket.pockethost.io/api/collections/chat_jepang/records?perPage=500&sort=-created`);
        // const response = await fetch(`https://poophdpocket.pockethost.io/api/collections/chat_jepang/records?perPage=5000&filter=(created>'${formattedDate}')`);
        const data = await response.json();
        // Hapus loading
        loadingDiv.remove();

        data.items.reverse().forEach(record => {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.style.fontWeight = "bold";
            const domainSpan = document.createElement('span');
            domainSpan.style.color = '#d81b60';
            domainSpan.style.fontSize = '13px';
            domainSpan.style.fontWeight = 'bold';
            domainSpan.innerText = record.domain;

            const br = document.createElement('br');

           const message = record.comment;
const lines = message.split('\n');

const urlRegex = /(https?:\/\/[^\s]+)/gi;

let textParts = [];
let links = [];

// ambil semua URL
message.replace(urlRegex, (url) => {
    links.push(url);
});

// hapus URL dari teks
const cleanText = message.replace(urlRegex, '').trim();

let html = domainSpan.outerHTML + '<br>';

// teks biasa
if (cleanText !== '') {
    html += `<div>${cleanText.replace(/\n/g, '<br>')}</div>`;
}

// multiple link â†’ UL
if (links.length > 1) {
    html += '<ul>';
    links.forEach(link => {
        html += `
        <li>
            <a href="${link}" target="_blank" class="urlhrefbody">
                ${link}
            </a>
        </li>`;
    });
    html += '</ul>';
}
// single link
else if (links.length === 1) {
    html += `
    <a href="${links[0]}" target="_blank" class="urlhrefbody">
        ${links[0]}
    </a>`;
}

messageDiv.innerHTML = html;

            const br2 = document.createElement('br');
            const br3 = document.createElement('br');

            const createdDate = new Date(record.created);
            const options = { day: 'numeric', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit' };
            const formattedDate = createdDate.toLocaleDateString('id-ID', options);

            const timeSpan = document.createElement('span');
            timeSpan.innerText = formattedDate;
            timeSpan.style.fontSize = '13px';
            timeSpan.style.color = 'green';
            timeSpan.style.fontWeight = 'bold';

            // Menampilkan alamat IP
            const ipSpan = document.createElement('span');
            ipSpan.innerText = `IP: ${record.ip_address}`;
            ipSpan.style.fontSize = '13px';
            ipSpan.style.color = 'blue';
            ipSpan.style.fontWeight = 'bold';

            messageDiv.appendChild(br2);
            messageDiv.appendChild(timeSpan);
            messageDiv.appendChild(br3);

            chatContainer.appendChild(messageDiv);
        });

        // Scroll ke bawah
        chatContainer.scrollTop = chatContainer.scrollHeight;
    } catch (error) {
        console.error(error);
        // Tampilkan pesan error jika terjadi masalah
        loadingDiv.innerText = 'Gagal memuat chat. lu refresh lagi web nya boss, KALO UDAH BERKALI KALI MASIH GAGAL BERARTI SERVER LAGI GANGGUAN. COBA BEBERAPA SAAT LAGI';
    }
}



        






        loadChatMessages();

         document.addEventListener('DOMContentLoaded', function() {
        const chatContainer = document.getElementById('chatContainer');
        chatContainer.scrollTop = chatContainer.scrollHeight;
    });
    </script>
    <!-- Modal Error -->
<div class="modal fade" id="errorModal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title">Server Error</h5>
        <button type="button" class="close text-white" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body font-weight-bold">
        Terjadi gangguan dari server.<br>
        Coba kirim pesan lagi.<br>
        Jika masih error, tunggu beberapa saat lagi.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Tutup
        </button>
      </div>
    </div>
  </div>
</div>

</body>
</html>
